{% extends "base.html" %}

{% block title %}ë¦¬ë”ë³´ë“œ - ë°©íƒˆì¶œ ê²Œì„{% endblock %}

{% block content %}
<style>
    /* í˜ì´ì§€ ì „ì²´ ìŠ¤í¬ë¡¤ í™œì„±í™” */
    html, body {
        overflow-y: auto !important;
        height: auto !important;
        min-height: 100vh;
    }
    
    /* ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ */
    html {
        scroll-behavior: smooth;
    }
    
    /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ (í¬ë¡¬, ì—£ì§€, ì‚¬íŒŒë¦¬) */
    ::-webkit-scrollbar {
        width: 12px;
    }
    
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
    
    /* í˜ì´ì§€ ì—¬ë°± í™•ë³´ */
    .content-wrapper {
        padding-bottom: 50px;
    }
</style>
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>
                <i class="fas fa-trophy me-2"></i>ëª…ì˜ˆì˜ ì „ë‹¹
            </h1>
            <div>
                <span class="badge bg-info fs-6">ì´ {{ total_records }}ëª…ì˜ ì˜ì›…</span>
            </div>
        </div>
    </div>
</div>

<!-- ë¦¬ë”ë³´ë“œ ì•ˆë‚´ -->
<div class="row mb-4">
    <div class="col-12">
        <div class="alert alert-info" role="alert">
            <h5 class="alert-heading">
                <i class="fas fa-info-circle me-2"></i>ì ìˆ˜ ê³„ì‚° ë°©ì‹
            </h5>
            <hr>
            <div class="row">
                <div class="col-md-4">
                    <strong>ê¸°ë³¸ ì ìˆ˜:</strong> ì™„ë£Œ ë¼ìš´ë“œ Ã— 100ì 
                </div>
                <div class="col-md-4">
                    <strong>íŒíŠ¸ í˜ë„í‹°:</strong> ì‚¬ìš©í•œ íŒíŠ¸ Ã— 10ì  ì°¨ê°
                </div>
                <div class="col-md-4">
                    <strong>ì‹œê°„ ë³´ë„ˆìŠ¤:</strong> ë¹ ë¥¸ ì™„ë£Œ ì‹œ ì¶”ê°€ ì ìˆ˜
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ë¦¬ë”ë³´ë“œ í…Œì´ë¸” -->
{% if records %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-gradient-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-crown me-2"></i>TOP {{ records|length }} ì˜ì›…ë“¤
                </h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th class="text-center" style="width: 80px;">ìˆœìœ„</th>
                                <th>í”Œë ˆì´ì–´</th>
                                <th class="text-center">ì ìˆ˜</th>
                                <th class="text-center">ë¼ìš´ë“œ</th>
                                <th class="text-center">íŒíŠ¸</th>
                                <th class="text-center">ì™„ë£Œì‹œê°„</th>
                                <th class="text-center">ë‹¬ì„±ì¼</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for record in records %}
                            <tr class="{% if loop.index <= 3 %}table-warning{% endif %}">
                                <td class="text-center">
                                    {% if loop.index == 1 %}
                                        <span style="font-size: 1.5rem;">ğŸ¥‡</span>
                                    {% elif loop.index == 2 %}
                                        <span style="font-size: 1.5rem;">ğŸ¥ˆ</span>
                                    {% elif loop.index == 3 %}
                                        <span style="font-size: 1.5rem;">ğŸ¥‰</span>
                                    {% else %}
                                        <strong>{{ loop.index }}</strong>
                                    {% endif %}
                                </td>
                                <td>
                                    <strong>{{ record[0] }}</strong>
                                    {% if loop.index <= 3 %}
                                        <span class="badge bg-warning text-dark ms-2">TOP 3</span>
                                    {% endif %}
                                </td>
                                <td class="text-center">
                                    <span class="badge bg-success fs-6">{{ record[4] }}ì </span>
                                </td>
                                <td class="text-center">{{ record[1] }}ë¼ìš´ë“œ</td>
                                <td class="text-center">
                                    {% if record[2] == 0 %}
                                        <span class="text-success"><i class="fas fa-star"></i> ì™„ë²½!</span>
                                    {% else %}
                                        {{ record[2] }}ê°œ
                                    {% endif %}
                                </td>
                                <td class="text-center">
                                    {% set minutes = record[3] // 60 %}
                                    {% set seconds = record[3] % 60 %}
                                    {% if minutes > 0 %}
                                        {{ minutes }}ë¶„ {{ seconds }}ì´ˆ
                                    {% else %}
                                        {{ seconds }}ì´ˆ
                                    {% endif %}
                                </td>
                                <td class="text-center">
                                    <small>{{ record[5][:16] }}</small>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ë„ì „ ìœ ë„ -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card bg-gradient-primary text-white">
            <div class="card-body text-center py-4">
                <h5><i class="fas fa-gamepad me-2"></i>ë‹¹ì‹ ë„ ëª…ì˜ˆì˜ ì „ë‹¹ì— ë„ì „í•´ë³´ì„¸ìš”!</h5>
                <p class="mb-3">ë” ë¹ ë¥´ê³ , ë” ì ì€ íŒíŠ¸ë¡œ ì™„ì£¼í•˜ì—¬ ìµœê³  ê¸°ë¡ì— ë„ì „í•˜ì„¸ìš”!</p>
                <a href="{{ url_for('game_start') }}" class="btn btn-light btn-lg">
                    <i class="fas fa-rocket me-2"></i>ì§€ê¸ˆ ë„ì „í•˜ê¸°
                </a>
            </div>
        </div>
    </div>
</div>

{% else %}
<!-- ê¸°ë¡ì´ ì—†ì„ ë•Œ -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body text-center py-5">
                <i class="fas fa-trophy fa-5x text-warning mb-3"></i>
                <h3 class="mt-3">ì•„ì§ ëª…ì˜ˆì˜ ì „ë‹¹ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</h3>
                <p class="text-muted mb-4">ì²« ë²ˆì§¸ ì˜ì›…ì´ ë˜ì–´ë³´ì„¸ìš”!</p>
                <a href="{{ url_for('game_start') }}" class="btn btn-primary btn-lg">
                    <i class="fas fa-rocket me-2"></i>ì²« ë²ˆì§¸ ë„ì „ìê°€ ë˜ê¸°
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
// í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜
document.addEventListener('DOMContentLoaded', function() {
    // í…Œì´ë¸” í–‰ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ê¸°
    const rows = document.querySelectorAll('tbody tr');
    rows.forEach((row, index) => {
        row.style.opacity = '0';
        row.style.transform = 'translateY(20px)';
        row.style.transition = 'all 0.5s ease';
        
        setTimeout(() => {
            row.style.opacity = '1';
            row.style.transform = 'translateY(0)';
        }, index * 100);
    });
});
</script>
{% endblock %}
